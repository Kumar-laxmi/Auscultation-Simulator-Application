<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wavesurfer.js Animated Looping Waveform</title>
    <!-- Include Wavesurfer.js -->
    <script src="https://unpkg.com/wavesurfer.js"></script>
</head>
<body style="background-color: black;"> <!-- Set the background color of the body -->
    <!-- Container for the waveform -->
    <div id="waveform"></div>

    <!-- Button to toggle play/pause -->
    <button id="btn">Play</button>

    <!-- Your script to initialize Wavesurfer.js -->
    <script>
        // Initialize Wavesurfer with the scrollParent option and reduced line width
        var wavesurfer = WaveSurfer.create({
            container: '#waveform',
            waveColor: 'black', // Set the waveColor to black
            progressColor: 'green',
            cursorWidth: 0,
            scrollParent: true,
            loop: true,
            autoplay: false, // Disable autoplay initially
            volume: 0,  // Set volume to 0
            barWidth: 1 // Adjust the barWidth to your desired value (e.g., 1)
        });

        // Load your audio file
        wavesurfer.load('combined_audio.wav');

        // Set the volume to 0 again to ensure it stays muted
        wavesurfer.setVolume(0);

        // Function to toggle play/pause when the button is clicked
        function togglePlayback() {
            if (wavesurfer.isPlaying()) {
                wavesurfer.pause();
                document.getElementById('btn').innerText = 'Play';
            } else {
                wavesurfer.play();
                document.getElementById('btn').innerText = 'Pause';
            }
        }

        // Set up click event for the button
        document.getElementById('btn').addEventListener('click', togglePlayback);

        // Handle the 'finish' event to loop the audio
        wavesurfer.on('finish', function () {
            wavesurfer.seekTo(0); // Seek to the beginning
            wavesurfer.play();    // Resume playback
        });
    </script>
</body>
</html>